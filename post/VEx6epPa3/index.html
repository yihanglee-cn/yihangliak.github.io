<html>
  <head>
    <meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>一杭的博客</title>
<meta name="description" content="你好  靓仔   :D" />
<link rel="shortcut icon" href="https://yihangliak.github.io/favicon.ico?v=1582280868520">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css">
<link href="https://cdn.remixicon.com/releases/v1.3.1/remixicon.css" rel="stylesheet">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Droid+Serif:400,700">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.7.2/animate.min.css">

<link rel="stylesheet" href="https://yihangliak.github.io/styles/main.css">
<link rel="alternate" type="application/atom+xml" title="一杭的博客 - Atom Feed" href="https://yihangliak.github.io/atom.xml">



  </head>
  <body>
    <div id="app" class="main px-4 flex flex-col lg:flex-row">
      <div id="sidebar" class="sidebar-wrapper lg:static lg:w-1/4">
  <div class="lg:sticky top-0">
    <div class="sidebar-content">
      <div class="flex lg:block p-4 lg:px-0 items-center fixed lg:static lg:block top-0 right-0 left-0 bg-white z-50">
        <i class="remixicon-menu-2-line lg:mt-4 text-2xl cursor-pointer animated fadeIn" onclick="openMenu()"></i>
        <a href="https://yihangliak.github.io">
          <img class="animated fadeInLeft avatar rounded-lg mx-4 lg:mt-32 lg:mx-0 mt-0 lg:w-24 lg:h-24 w-12 w-12" src="https://yihangliak.github.io/images/avatar.png?v=1582280868520" alt="">
        </a>
        <h1 class="animated fadeInLeft lg:text-4xl font-extrabold lg:mt-8 mt-0 text-xl" style="animation-delay: 0.2s">一杭的博客</h1>
      </div>
      
        <div class="animated fadeInLeft" style="animation-delay: 0.4s">
          <p class="my-4 text-gray-600 font-light hidden lg:block">
            文章目录
          </p>
          <div class="toc-container hidden lg:block">
            <ul class="markdownIt-TOC">
<li><a href="#%E5%9B%9B-sql%E8%AF%AD%E8%A8%80">四、SQL语言</a>
<ul>
<li><a href="#1%E6%95%B0%E6%8D%AE%E8%A1%A8%E6%93%8D%E4%BD%9C">1.数据表操作</a>
<ul>
<li><a href="#11-%E5%88%9B%E5%BB%BA%E8%A1%A8">1.1 创建表</a></li>
<li><a href="#12-%E5%88%A0%E9%99%A4%E8%A1%A8">1.2 删除表</a></li>
</ul>
</li>
<li><a href="#2%E6%95%B0%E6%8D%AE%E6%93%8D%E4%BD%9C-%E5%A2%9E%E5%88%A0%E6%94%B9%E6%9F%A5">2.数据操作-增删改查</a>
<ul>
<li><a href="#21-%E7%AE%80%E5%8D%95%E6%9F%A5%E8%AF%A2">2.1 简单查询</a></li>
<li><a href="#22-%E6%B7%BB%E5%8A%A0%E6%95%B0%E6%8D%AE">2.2 添加数据</a>
<ul>
<li><a href="#%E6%B7%BB%E5%8A%A0%E4%B8%80%E8%A1%8C%E6%95%B0%E6%8D%AE">添加一行数据</a></li>
<li><a href="#%E6%B7%BB%E5%8A%A0%E5%A4%9A%E8%A1%8C%E6%95%B0%E6%8D%AE">添加多行数据</a></li>
</ul>
</li>
<li><a href="#23-%E4%BF%AE%E6%94%B9%E6%95%B0%E6%8D%AE">2.3 修改数据</a></li>
<li><a href="#24-%E5%88%A0%E9%99%A4%E6%95%B0%E6%8D%AE">2.4 删除数据</a></li>
</ul>
</li>
<li><a href="#3%E6%95%B0%E6%8D%AE%E6%93%8D%E4%BD%9C-%E6%9F%A5%E8%AF%A2">3.数据操作-查询</a>
<ul>
<li><a href="#31-%E5%87%86%E5%A4%87%E6%95%B0%E6%8D%AE">3.1 准备数据</a></li>
<li><a href="#32-%E6%9F%A5%E8%AF%A2%E6%89%80%E6%9C%89">3.2 查询所有</a></li>
<li><a href="#33-%E6%9F%A5%E8%AF%A2%E6%8C%87%E5%AE%9A%E5%AD%97%E6%AE%B5">3.3 查询指定字段</a></li>
<li><a href="#34-%E5%8E%BB%E9%87%8D%E5%A4%8D">3.4 去重复</a></li>
<li><a href="#35-%E6%9D%A1%E4%BB%B6%E6%9F%A5%E8%AF%A2">3.5 条件查询</a>
<ul>
<li><a href="#%E8%AF%AD%E6%B3%95">语法</a></li>
<li><a href="#%E6%AF%94%E8%BE%83%E8%BF%90%E7%AE%97%E7%AC%A6">比较运算符</a></li>
<li><a href="#%E9%80%BB%E8%BE%91%E8%BF%90%E7%AE%97%E7%AC%A6">逻辑运算符</a></li>
<li><a href="#%E6%A8%A1%E7%B3%8A%E6%9F%A5%E8%AF%A2">模糊查询</a></li>
<li><a href="#%E8%8C%83%E5%9B%B4%E6%9F%A5%E8%AF%A2">范围查询</a></li>
<li><a href="#%E7%A9%BA%E5%88%A4%E6%96%AD">空判断</a></li>
</ul>
</li>
<li><a href="#36-%E6%8E%92%E5%BA%8F">3.6 排序</a></li>
<li><a href="#37-%E8%81%9A%E5%90%88%E5%87%BD%E6%95%B0">3.7 聚合函数</a>
<ul>
<li><a href="#count">count</a></li>
<li><a href="#max">max</a></li>
<li><a href="#min">min</a></li>
<li><a href="#sum">sum</a></li>
<li><a href="#avg">avg</a></li>
</ul>
</li>
<li><a href="#38-%E5%88%86%E7%BB%84%E5%87%BD%E6%95%B0">3.8 分组函数</a></li>
<li><a href="#39-%E5%88%86%E9%A1%B5">3.9 分页</a>
<ul>
<li><a href="#%E8%8E%B7%E5%8F%96%E9%83%A8%E5%88%86%E8%A1%8C">获取部分行</a></li>
<li><a href="#%E5%88%86%E9%A1%B5">分页</a></li>
</ul>
</li>
<li><a href="#310-%E8%BF%9E%E6%8E%A5%E6%9F%A5%E8%AF%A2">3.10 连接查询</a>
<ul>
<li><a href="#%E7%AD%89%E5%80%BC%E8%BF%9E%E6%8E%A5">等值连接</a></li>
<li><a href="#%E5%86%85%E8%BF%9E%E6%8E%A5">内连接</a></li>
<li><a href="#%E5%B7%A6%E8%BF%9E%E6%8E%A5">左连接</a></li>
<li><a href="#%E5%8F%B3%E8%BF%9E%E6%8E%A5">右连接</a></li>
</ul>
</li>
<li><a href="#311-%E8%87%AA%E5%85%B3%E8%81%94">3.11 自关联</a></li>
<li><a href="#312-%E5%AD%90%E6%9F%A5%E8%AF%A2">3.12 子查询</a></li>
<li><a href="#313-%E6%9F%A5%E8%AF%A2%E6%BC%94%E7%BB%83">3.13 查询演练</a></li>
<li><a href="#314%E6%95%B0%E6%8D%AE%E5%88%86%E8%A1%A8">3.14数据分表</a></li>
</ul>
</li>
</ul>
</li>
</ul>

          </div>
        </div>
      
    </div>
  </div>
</div>

<div class="menu-container">
  <i class="remixicon-arrow-left-line text-2xl cursor-pointer animated fadeIn close-menu-btn" onclick="closeMenu()"></i>
  <div>
    
      
        <a href="https://yihangliak.github.io" class="menu" style="animation-delay: 0s">
          首页
        </a>
      
    
      
        <a href="https://yihangliak.github.io/archives" class="menu" style="animation-delay: 0.2s">
          归档
        </a>
      
    
      
        <a href="https://yihangliak.github.io/tags" class="menu" style="animation-delay: 0.4s">
          标签
        </a>
      
    
      
        <a href="https://yihangliak.github.io/post/about/" class="menu" style="animation-delay: 0.6000000000000001s">
          关于
        </a>
      
    
  </div>
  <div class="site-footer">
    <div class="py-4 text-gray-700">Powered by yihang</div>
    <a class="rss" href="https://yihangliak.github.io/atom.xml" target="_blank">RSS</a>
  </div>
</div>
<div class="mask" onclick="closeMenu()">
</div>
      <div class="content-wrapper py-32 lg:p-8 lg:w-3/4 post-detail animated fadeIn">
        <h1 class="text-3xl font-bold lg:mt-16">MySQL系列入门（四）：SQL语言</h1>
        <div class="text-sm text-gray-700 lg:my-8">
          2020-02-21 / 28 min read
        </div>
        
          <img class="post-feature-image rounded-lg mx-auto my-4" src="https://pic.downk.cc/item/5e4fa67b48b86553ee3ab605.jpg" alt="">
        
        <div class="post-content yue">
          <h1 id="四-sql语言">四、SQL语言</h1>
<h2 id="1数据表操作">1.数据表操作</h2>
<h3 id="11-创建表">1.1 创建表</h3>
<p>格式：</p>
<pre><code class="language-mysql">create table 表名(
    字段名 类型 约束
    字段名 类型 约束
    ...
)
</code></pre>
<p>例：创建学生表，字段要求如下：</p>
<ul>
<li>姓名（长度为10），年龄（不能为负）</li>
</ul>
<pre><code class="language-mysql">create table students(
    name varchar(10), 			-- varchar(10)表示10个字符长度
    age int unsigned			-- unsigned表示无符号，即不能为负
);
</code></pre>
<p>例：创建学生表，字段要求如下：</p>
<ul>
<li>姓名(长度为10)， 年龄，身高(保留小数点2位)</li>
</ul>
<pre><code class="language-mysql">create table students2(
	id int unsigned primary key auto_increment, -- 设置id为主键并自动编号，自动编号须与主键一起使用
    name varchar(10),
    age int unsigned,						  -- 不能为负整数
    height decimal(5, 2)					  -- 共存5位小数，小数占2位，整数占3位
);
</code></pre>
<h3 id="12-删除表">1.2 删除表</h3>
<p>格式：</p>
<pre><code class="language-mysql">-- 格式一：被删除的表不存在会报错
drop table 表名;

-- 格式二：如果存在表再删除表，先判断再删除
drop table if exists 表名;
</code></pre>
<h2 id="2数据操作-增删改查">2.数据操作-增删改查</h2>
<h3 id="21-简单查询">2.1 简单查询</h3>
<pre><code class="language-mysql">select * from 表名;

select * from students;  -- 查询学生表中的所有数据
</code></pre>
<h3 id="22-添加数据">2.2 添加数据</h3>
<h4 id="添加一行数据">添加一行数据</h4>
<p><strong>格式一：所有值与字段顺序对应</strong></p>
<pre><code class="language-mysql">insert into 表名 values(...);
</code></pre>
<blockquote>
<p>注意：主键列是自动增长，插入时需要占位，通常使用<code>0</code>或者<code>default</code>或者<code>null</code>来占位</p>
</blockquote>
<p>例：在学生表中插入一个学生信息</p>
<p>表结构为：</p>
<pre><code>| id | name | age | height |
</code></pre>
<p>插入：</p>
<pre><code class="language-mysql">insert into student values(0, 'zhangsan', 22, 170.23);
</code></pre>
<p>插入完成：</p>
<pre><code>| id | name     | age | height |
  1	   zhangsan	  22	170.23
</code></pre>
<p><strong>格式二：插入部分数据</strong></p>
<pre><code class="language-mysql">insert into 表名(字段1, ...) values(值1, ...)
</code></pre>
<p>例：插入一个学生，只插入姓名</p>
<pre><code class="language-mysql">insert into students(name) values('亚索');
</code></pre>
<p>插入完成：</p>
<pre><code>+----+----------+------+--------+
| id | name     | age  | height |
+----+----------+------+--------+
|  1 | zhangsan |   22 | 170.23 |
|  2 | lisi     |   21 | 160.13 |
|  3 | 亚索     | NULL | NULL   |      -- 插入在这儿
+----+----------+------+--------+
</code></pre>
<h4 id="添加多行数据">添加多行数据</h4>
<p><strong>方法一：写多条insert语句，语句间用分号隔开</strong></p>
<pre><code class="language-mysql">insert into students(name) values('安妮');
insert into students(name) values('金克斯');
insert into students values(0, '琴女', 19, 170);
</code></pre>
<p><strong>方法二：写一条insert语句，设置多个数据，数据间用逗号隔开</strong></p>
<pre><code class="language-mysql">-- 格式一  
insert into students values(0,'kasha', 100, 190),(0, 'lala', 99, 176.4);

-- 格式二
insert into students(name) values('光女一号'),('光女二号'),('光女三号');
</code></pre>
<h3 id="23-修改数据">2.3 修改数据</h3>
<p><strong>格式：</strong></p>
<pre><code class="language-mysql">update 表名 set 列1=值1,列2=值2... ... where 条件
</code></pre>
<p>**例：**修改<code>id</code>为<code>5</code>的学生数据，姓名改为<code>狄仁杰</code>，年龄改为<code>20</code></p>
<pre><code class="language-mysql">update students set name='狄仁杰', age=20 where id=5;
</code></pre>
<h3 id="24-删除数据">2.4 删除数据</h3>
<p><strong>格式：</strong></p>
<pre><code class="language-mysql">delete from 表名 where 条件
</code></pre>
<p>**例：**删除<code>id</code>为<code>6</code>的学生</p>
<pre><code class="language-mysql">delete from students where id=6;
</code></pre>
<blockquote>
<p>注意：对于重要的数据，不能轻易执行删除语句，一旦删除，数据无法恢复，推荐进行 <strong>逻辑删除</strong></p>
</blockquote>
<p><strong>逻辑删除</strong></p>
<ul>
<li>在表中添加<code>isdelete</code>字段，字段值默认为<code>0</code>，<code>0</code>表示未删除，<code>1</code>表示删除</li>
</ul>
<pre><code class="language-mysql">alter table students add column `isdelete` tinyint not null default '0' comment '用户是否被删除 0未删除 1已删除';
</code></pre>
<blockquote>
<p>注意：</p>
<ul>
<li><code>tinyint</code>类型如果指定<code>unsigned</code>只可以储存<code>0-255</code>的整数，且不能为负数，否则<code>-128-127</code></li>
<li><code>tinyint(2)</code>括号中的<code>2</code>是指存储宽度，位数不够自动左边补<code>0</code></li>
</ul>
</blockquote>
<ul>
<li>决定删除某条数据时，将<code>isdelete</code>字段设置为<code>1</code></li>
</ul>
<pre><code class="language-mysql">update students set isdelete=1 where id=1; -- 将id为1的学生删除
</code></pre>
<ul>
<li>以后在查询数据时，只查出<code>isdelete=0</code>的数据</li>
</ul>
<pre><code class="language-mysql">select * from students where isdelete=0;  -- 只查出没有被删除的学生
</code></pre>
<h2 id="3数据操作-查询">3.数据操作-查询</h2>
<h3 id="31-准备数据">3.1 准备数据</h3>
<p><strong>创建表</strong></p>
<pre><code class="language-mysql"> drop table if exists students;
 create table students (
		studentNo varchar(10) primary key,
		name varchar(10),
		sex varchar(1),
		hometown varchar(20),
		age tinyint(3), -- tinyint,小整数,有符号-128-127，无符号0-255,3表示显示宽度
		class varchar(10),
		card varchar(11)
 );
 
 insert into students values
 ('001', '王昭君', '女', '北京', 20, '1班', '11010119900'),
 ('002', '诸葛亮', '男', '上海', 18, '2班', '11010119900'),
 ('003', '张飞', '男', '南京', 24, '3班', '11010119900'),
 ('004', '白起', '男', '安徽', 22, '4班', '11010119900'),
 ('005', '大乔', '女', '天津', 19, '3班', '11010119900'),
 ('006', '孙尚香', '女', '河北', 18, '1班', '11010119900'),
 ('007', '百里玄策', '男', '山西', 20, '2班', '11010119900'),
 ('008', '小乔', '女', '河南', 15, '3班', NULL),
 ('009', '百里守约', '男', '湖南', 21, '1班', ''),
 ('010', '妲己', '女', '广东', 26, '2班', '11010119900'),
 ('011', '李白', '男', '北京', 30, '4班', '11010119900'),
 ('012', '孙膑', '男', '新疆', 26, '3班', '11010119900')
</code></pre>
<h3 id="32-查询所有">3.2 查询所有</h3>
<pre><code class="language-mysql">select * from students;
</code></pre>
<h3 id="33-查询指定字段">3.3 查询指定字段</h3>
<pre><code class="language-mysql">-- 单表时，直接字段名即可
select studentno, name from students;

-- 表名.字段名
select students.name from students;

-- 给表取表名
select s.name, s.hometown from students as s;

-- 给字段取别名
select name as 姓名, hometown as 籍贯 from students;
</code></pre>
<h3 id="34-去重复">3.4 去重复</h3>
<p>​	在<code>select</code>后面，字段前面使用<code>distinct</code>可以消除重复的行</p>
<pre><code class="language-mysql">select distinct hometown as 籍贯 from students;
</code></pre>
<blockquote>
<p>注意：如果使用<code>distinct</code>查询多列时，只有多列组合重复时才会去重</p>
</blockquote>
<pre><code class="language-mysql">select distinct id, name from actors
</code></pre>
<pre><code>id	name
1	吴亦凡     这个和最后一个姓名是重复的，但是组合去重时并没有去掉
2	王昭君
3	孙膑
4	陈军
5	刘美
6	吴亦凡
7	鹿晗
8	范闲
9	范若若
10	司理理
11	陈萍萍
12	吴亦凡
</code></pre>
<h3 id="35-条件查询">3.5 条件查询</h3>
<h4 id="语法">语法</h4>
<ul>
<li>
<p>使用<code>where</code>子句对表中的数据进行筛选，符合条件的数据会出现在结果集中</p>
</li>
<li>
<p>语法如下：</p>
</li>
</ul>
<pre><code class="language-mysql">select 字段1，字段2... from 表名 where 条件;
</code></pre>
<ul>
<li>例如：查询<code>studentno</code>为<code>010</code>的学生姓名</li>
</ul>
<pre><code class="language-mysql">select name from students where studentno=010;
</code></pre>
<h4 id="比较运算符">比较运算符</h4>
<table>
<thead>
<tr>
<th style="text-align:center">运算符</th>
<th style="text-align:center">解释</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">&gt;</td>
<td style="text-align:center">大于</td>
</tr>
<tr>
<td style="text-align:center">&lt;</td>
<td style="text-align:center">小于</td>
</tr>
<tr>
<td style="text-align:center">&gt;=</td>
<td style="text-align:center">大于或等于</td>
</tr>
<tr>
<td style="text-align:center">&lt;=</td>
<td style="text-align:center">小于或等于</td>
</tr>
<tr>
<td style="text-align:center">=</td>
<td style="text-align:center">等于</td>
</tr>
<tr>
<td style="text-align:center">！=</td>
<td style="text-align:center">不等于，两边是否不相等</td>
</tr>
</tbody>
</table>
<p>**例1：**查询 <strong>陈萍萍</strong> 的年龄</p>
<pre><code class="language-mysql">select age from students where name='陈萍萍';
</code></pre>
<p>**例2：**查询 <strong>20岁</strong> 以下的学生</p>
<pre><code class="language-mysql">select * from students where age&lt;20;
</code></pre>
<p>**例3：**查询籍贯不在北京的学生信息</p>
<pre><code class="language-mysql">select * from students where hometown!='北京';
</code></pre>
<p><strong>练习</strong></p>
<ol>
<li>查询学号是<code>007</code>的学生的信息</li>
<li>查询除了<code>1</code>班以外的学生信息</li>
<li>查询年龄大于<code>20</code>的学生姓名以及性别</li>
</ol>
<pre><code class="language-mysql">-- 1
select * from students where studentno=007;

-- 2
select * from students where class!='1班';

-- 3
select name,sex from students where age&gt;20;
</code></pre>
<h4 id="逻辑运算符">逻辑运算符</h4>
<table>
<thead>
<tr>
<th style="text-align:center">运算符</th>
<th style="text-align:center">解释</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">and</td>
<td style="text-align:center">和，并且</td>
</tr>
<tr>
<td style="text-align:center">or</td>
<td style="text-align:center">或者</td>
</tr>
<tr>
<td style="text-align:center">not</td>
<td style="text-align:center">非（否定）</td>
</tr>
</tbody>
</table>
<p>**例1：**查询年龄小于20的女同学</p>
<pre><code class="language-mysql">select * from students where age&lt;20 and sex='女';
</code></pre>
<p>**例2：**查询女学生或者1班的学生</p>
<pre><code class="language-mysql">select * from students where sex='女' or class='1班'
</code></pre>
<p>**例3：**查询非天津的学生</p>
<pre><code class="language-mysql">select * from students where not hometown='天津'
</code></pre>
<p><strong>练习</strong></p>
<ol>
<li>查询河南或江苏的学生</li>
<li>查询1班的北京学生</li>
<li>查询非20岁的学生</li>
</ol>
<p><strong>答案</strong></p>
<pre><code class="language-mysql">-- 1
select * from students where hometown='河南' or hometown='江苏'
-- 2
select * from students where class='1班' and hometown='北京'
-- 3
select * from students where not age=20
</code></pre>
<h4 id="模糊查询">模糊查询</h4>
<ul>
<li><strong>关键字：</strong><code>like</code></li>
<li><code>%</code>表示一个或多个任意字符</li>
<li><code>_</code>表示任意一个字符</li>
</ul>
<p>**例1：**查询姓范的学生</p>
<pre><code class="language-mysql">select * from students where name like '范%'
</code></pre>
<p>**例2：**查询姓范并且名字只有一个字的学生</p>
<pre><code class="language-mysql">select * from students where name like '范_'
</code></pre>
<p>**例3：**查询名字以凡结尾的学生</p>
<pre><code class="language-mysql">select * from students where name like '%凡'
</code></pre>
<p>**例4：**查询名字中包含范的学生</p>
<pre><code class="language-mysql">select * from students where name like '%范%'
</code></pre>
<h4 id="范围查询">范围查询</h4>
<ul>
<li><code>in</code>表示在一个非连续的范围内</li>
</ul>
<p>**例：**查询家乡是北京或湖南或上海的学生</p>
<pre><code class="language-mysql">select * from students where hometown in ('北京','湖南','上海')
</code></pre>
<ul>
<li><code>between...and...</code>表示在一个连续的范围内</li>
</ul>
<p>**例：**查询年龄为18到20岁的学生信息</p>
<pre><code class="language-mysql">select * from students where age between 18 and 20
</code></pre>
<blockquote>
<p>注意：使用<code>between...and...</code>时，数字必须前小后大，否则查不到</p>
</blockquote>
<p><strong>练习</strong></p>
<ol>
<li>查询年龄在18或19或20的女学生</li>
<li>查询年龄在20到25以外的学生</li>
</ol>
<p><strong>答案</strong></p>
<pre><code class="language-mysql">-- 1
select * from students where age in (18,19,20) and sex='女'
-- 2
select * from students where not age between 20 and 25
</code></pre>
<h4 id="空判断">空判断</h4>
<ul>
<li><code>null</code>与<code>''</code>(空字符串)是不一样的</li>
<li>判断是否为空：<code>is null</code></li>
</ul>
<p>**例1：**查询没有填写身份证的学生</p>
<pre><code class="language-mysql">select * from students where card is null
</code></pre>
<p>**例2：**查询填写了身份证</p>
<pre><code class="language-mysql">select * from students where card is not null
</code></pre>
<h3 id="36-排序">3.6 排序</h3>
<ul>
<li><strong>关键字：</strong><code>order by</code></li>
<li>升序：<code>asc</code></li>
<li>降序：<code>desc</code></li>
</ul>
<blockquote>
<p>注意：排序时如果没写<code>asc/desc</code>，则默认<strong>升序</strong>排序</p>
</blockquote>
<p>**例1：**查询所有学生的信息并按照年龄升序排序</p>
<pre><code class="language-mysql">select * from students order by age asc
或者
select * from students order by age
</code></pre>
<p>**例2：**查询所有学生信息，按年龄从小到大排序，如果年龄相同时再按照学号从大到小排序</p>
<pre><code class="language-mysql">select * from students order by age asc,studentno desc
</code></pre>
<h3 id="37-聚合函数">3.7 聚合函数</h3>
<p>使用聚合函数可以快速得到统计数据，常用的聚合函数有如下五个</p>
<h4 id="count">count</h4>
<p>计算总行数</p>
<p>**例：**查询学生总数</p>
<pre><code class="language-mysql">select count(*) from students
</code></pre>
<h4 id="max">max</h4>
<p>求此列最大值</p>
<p>**例：**求女生的最大年龄</p>
<pre><code class="language-mysql">select max(age) from students where sex='女'
</code></pre>
<h4 id="min">min</h4>
<p>求此列最小值</p>
<p>**例：**求3班的最小年龄</p>
<pre><code class="language-mysql">select min(age) from students where class='3班'
</code></pre>
<h4 id="sum">sum</h4>
<p>求此列的和</p>
<p>**例：**查询北京学生的年龄总和</p>
<pre><code class="language-mysql">select sum(age) from students where hometown='北京'
</code></pre>
<h4 id="avg">avg</h4>
<p>求此列的平均值</p>
<p>**例：**查询女生的平均年龄</p>
<pre><code class="language-mysql">select avg(age) from students where sex='女'
</code></pre>
<p><strong>练习</strong></p>
<ol>
<li>查询所有学的最大年龄，最小年龄，平均年龄</li>
<li>3班一共有多少个学生</li>
<li>查询3班年龄小于20岁的学生有几个</li>
</ol>
<p><strong>答案</strong></p>
<pre><code class="language-mysql">-- 1
select max(age) from students
select min(age) from students
select avg(age) from students

-- 2
select count(*) from students where class='3班'

-- 3
select count(*) from students where class='3班' and age&lt;20
</code></pre>
<h3 id="38-分组函数">3.8 分组函数</h3>
<ul>
<li>按照字段分组，字段相同的数据会被放到一个组中</li>
<li>分组后，分组的依据列会显示在结果集中，其他列不显示</li>
<li>可以最分组后的数据进行统计，做  <strong>聚合运算</strong></li>
<li><strong>关键字：</strong><code>group by</code></li>
<li><strong>数据筛选关键字：</strong><code>having</code></li>
</ul>
<p>**例1：**查询各种性别的人数</p>
<pre><code class="language-mysql">select sex,count(*) from students group by sex
</code></pre>
<p>**例2：**查询各种年龄的人数</p>
<pre><code class="language-mysql">select age,count(*) from students group by age
</code></pre>
<p>**例3：**查询男生总人数</p>
<pre><code class="language-mysql">方案一：
select sex,count(*) from students group by sex having sex='男'
方案二：
select count(*) from students where sex='男'
</code></pre>
<blockquote>
<p>注意：</p>
<ul>
<li>
<p><code>where</code>是对表的数据进行筛选，属于对原始数据进行筛选</p>
</li>
<li>
<p><code>having</code>是对<code>group by</code>的结果进行筛选</p>
</li>
<li>
<p>两者是不同的</p>
</li>
</ul>
</blockquote>
<h3 id="39-分页">3.9 分页</h3>
<h4 id="获取部分行">获取部分行</h4>
<p>从大量的数据中获取一部分数据</p>
<p><strong>语法：</strong><code>select * from 表 limit 开始位置，数量</code></p>
<p>**例1：**查询前3行学生信息</p>
<pre><code class="language-mysql">select * from students limit 0,3
</code></pre>
<blockquote>
<p>注意：表中的数据是从0开始的</p>
</blockquote>
<p>**例2：**查询第4到第6行的学生信息</p>
<pre><code class="language-mysql">select * from students limit 3,3
</code></pre>
<h4 id="分页">分页</h4>
<p>每页显示<code>m</code>条数据，显示<code>n</code>页</p>
<pre><code class="language-mysql">select * from 表 limit m*(n-1),m
</code></pre>
<p>**例：**每页显示5条数据，一共显示3页</p>
<p>常规思路，首先应该统计总共有几条数据</p>
<pre><code class="language-mysql">select count(*) from students
</code></pre>
<p>第一页</p>
<pre><code class="language-mysql">select * from students limit 0,5
</code></pre>
<p>第二页</p>
<pre><code class="language-mysql">select * from students limit 5,5
</code></pre>
<p>第三页</p>
<pre><code class="language-mysql">select * from students limit 10,5
</code></pre>
<blockquote>
<p>总结出上面的公式</p>
</blockquote>
<h3 id="310-连接查询">3.10 连接查询</h3>
<p><strong>准备数据</strong></p>
<p>创建学生表并插入数据</p>
<pre><code class="language-mysql"> drop table if exists students;
 create table students (
		studentNo varchar(10) primary key,
		name varchar(10),
		sex varchar(1),
		hometown varchar(20),
		age tinyint(3), -- tinyint,小整数,有符号-128-127，无符号0-255,3表示显示宽度
		class varchar(10),
		card varchar(11)
 );
 
 insert into students values
 ('001', '王昭君', '女', '北京', 20, '1班', '11010119900'),
 ('002', '诸葛亮', '男', '上海', 18, '2班', '11010119900'),
 ('003', '张飞', '男', '南京', 24, '3班', '11010119900'),
 ('004', '白起', '男', '安徽', 22, '4班', '11010119900'),
 ('005', '大乔', '女', '天津', 19, '3班', '11010119900'),
 ('006', '孙尚香', '女', '河北', 18, '1班', '11010119900'),
 ('007', '百里玄策', '男', '山西', 20, '2班', '11010119900'),
 ('008', '小乔', '女', '河南', 15, '3班', NULL),
 ('009', '百里守约', '男', '湖南', 21, '1班', ''),
 ('010', '妲己', '女', '广东', 26, '2班', '11010119900'),
 ('011', '李白', '男', '北京', 30, '4班', '11010119900'),
 ('012', '孙膑', '男', '新疆', 26, '3班', '11010119900')
</code></pre>
<p>创建成绩表并插入数据</p>
<pre><code class="language-mysql">drop table if exists scores;
create table scores (
	id int unsigned primary key auto_increment,
	coursesNo int(10) unsigned,
	studentNo varchar(10),
	socre tinyint(4)
);
insert into scores values
(1, 1, '001', 90),
(2, 1, '002', 75),
(3, 2, '002', 98),
(4, 3, '001', 86),
(5, 3, '003', 80),
(6, 4, '004', 79),
(7, 5, '005', 96),
(8, 6, '006', 80);
</code></pre>
<p>创建课程表并插入数据</p>
<pre><code class="language-mysql">drop table if exists courses;
create table courses (
	coursesNo int unsigned primary key auto_increment,
	name varchar(10)
);
insert into courses values
(1, '数据库'),
(2, '自动化测试'),
(3, 'Linux'),
(4, '测试理论'),
(5, 'web网络'),
(6, 'App测试')
</code></pre>
<p>三张表全部准备完毕，如下图：</p>
<figure data-type="image" tabindex="1"><img src="https://pic.downk.cc/item/5e4a9ffd48b86553ee263fc4.png" alt="" loading="lazy"></figure>
<h4 id="等值连接">等值连接</h4>
<p><strong>语法：</strong><code>select * from 表1, 表2 where 表1.列=表2.列</code></p>
<p>**例：**查询学生信息以及学生成绩</p>
<pre><code class="language-mysql">select * from students as stu,scores as sco where stu.studentNo=sco.studentNo
</code></pre>
<p>查询的信息太多了，精简一下，只要学生姓名和成绩</p>
<pre><code class="language-mysql">select stu.name,sco.socre from students as stu,scores as sco where stu.studentNo=sco.studentNo
</code></pre>
<blockquote>
<p>注意：使用等值连接查询多表时，一定要先找出两张表中 <strong>共同</strong> 的字段，等值连接会把多个表生成一个 <strong>临时表</strong>，再使用<code>where</code>进行过滤</p>
</blockquote>
<h4 id="内连接">内连接</h4>
<blockquote>
<p>把多张表用相同的列关联起来，过滤掉不同的数据，只保留相同的数据</p>
</blockquote>
<p><strong>图示</strong></p>
<figure data-type="image" tabindex="2"><img src="https://pic.downk.cc/item/5e4ba12448b86553ee508c78.jpg" alt="" loading="lazy"></figure>
<p><strong>语法：</strong><code>select * from 表1 inner join 表2 on 表1.列=表2.列</code></p>
<p>**例1：**查询学生姓名以及学生成绩</p>
<pre><code class="language-mysql">select stu.name,sco.score from students as stu 
inner join scores as sco 
on stu.studentNo=sco.studentNo
</code></pre>
<blockquote>
<p>PS：分数字段名写错了</p>
<p>​		修改字段名<code>alter table scores change socre score tinyint(4)</code></p>
</blockquote>
<blockquote>
<p>注意： <strong>内连接</strong> 属于 <strong>等值连接</strong>，但是内连接不会创建临时表，所以<strong>性能</strong>会比较好些</p>
</blockquote>
<p>**例2：**查询课程信息以及课程的成绩</p>
<pre><code class="language-mysql">select co.name,sc.score from courses as co 
inner join scores as sc
on co.coursesNo=sc.coureseNo
</code></pre>
<p>**例3：**查询学生信息以及学生的课程对应的成绩信息</p>
<pre><code class="language-mysql">select stu.name as 学生姓名, cou.name as 课程名, sco.score as 分数
from students as stu,scores as sco,courses as cou
where stu.studentNo=sco.studentNo and sco.coureseNo=cou.coursesNo

-- 内连接写法
select stu.name as 学生姓名, cou.name as 课程名字, sco.score as 分数
from students as stu
inner join scores as sco
on stu.studentNo=sco.studentNo
inner join courses as cou
on sco.coursesNo=cou.coursesNo
</code></pre>
<pre><code>学生姓名 课程名 分数
王昭君	数据库	90
诸葛亮	数据库	75
诸葛亮	自动化测试	98
王昭君	Linux	86
张飞	Linux	80
白起	测试理论	79
大乔	web网络	96
孙尚香	App测试	80
</code></pre>
<p>**例4：**查询王昭君的成绩，要求显示姓名、课程号、成绩</p>
<pre><code class="language-mysql">select stu.name ,cou.name as courseName,sco.score from students as stu,scores as sco, courses as cou
where stu.studentNo=sco.studentNo and sco.coursesNo=cou.coursesNo
and stu.name='王昭君'

-- 内连接写法
select stu.name,cou.name as courseName,sco.score from students as stu
inner join scores as sco
on stu.studentNo=sco.studentNo
inner join courses as cou
on sco.coursesNo=cou.coursesNo
where stu.name='王昭君'
</code></pre>
<p>**例5：**查询王昭君的数据库成绩，要求显示姓名，课程名，成绩</p>
<pre><code class="language-mysql">select stu.name,cou.name as courseName,sco.score
from students as stu,scores as sco, courses as cou
where stu.studentNo=sco.studentNo and sco.coursesNo=cou.coursesNo
and stu.name='王昭君' and cou.name='数据库'

-- 内连接写法
select stu.name,cou.name as courseName,sco.score from students as stu
inner join scores as sco
on stu.studentNo=sco.studentNo
inner join courses as cou
on sco.coursesNo=cou.coursesNo
where stu.name='王昭君' and cou.name='数据库'
</code></pre>
<p>**例6：**查询男生中的最高成绩，要求显示姓名，课程名，成绩</p>
<pre><code class="language-mysql">select stu.name,stu.sex,cou.name as courseName,sco.score from students as stu, scores as sco,courses as cou
where stu.studentNo=sco.studentNo and sco.coursesNo=cou.coursesNo
and stu.sex='男'
order by sco.score desc
limit 0,1

-- 内连接写法
select stu.name,stu.sex,cou.name as courseName,sco.score from students as stu
inner join scores as sco
on stu.studentNo=sco.studentNo
inner join courses as cou 
on sco.coursesNo=cou.coursesNo
where stu.sex='男' 
order by sco.score desc
limit 1
</code></pre>
<h4 id="左连接">左连接</h4>
<blockquote>
<p>以左表为主表，左表的数据全部显示，左表有右表没有的显示为<code>null</code></p>
</blockquote>
<p><strong>图示：</strong></p>
<figure data-type="image" tabindex="3"><img src="C:%5CUsers%5Cliyihang%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20200219000359395.png" alt="image-20200219000359395" loading="lazy"></figure>
<p><strong>语法：</strong><code>select * from 表1 left join 表2 on 表1.列=表2.列</code></p>
<p>**例1：**查询所有学生的成绩，包括没有成绩的学生</p>
<pre><code class="language-mysql">select stu.studentNo,stu.name,sco.score 
from students as stu
left join scores as sco
on stu.studentNo=sco.studentNo
</code></pre>
<blockquote>
<p>注意：<code>join</code>前面的表为 <strong>左表</strong>，后面的表为 <strong>右表</strong></p>
</blockquote>
<p>**例2：**查询所有学生的课程以及成绩，包括没有成绩的学生</p>
<pre><code class="language-mysql">select stu.studentNo,stu.name,sco.score,cou.name as courseName from students as stu
left join scores as sco
on stu.studentNo=sco.studentNo
left join courses as cou
on sco.coursesNo=cou.coursesNo
</code></pre>
<figure data-type="image" tabindex="4"><img src="https://pic.downk.cc/item/5e4ce65248b86553ee8fd30d.jpg" alt="" loading="lazy"></figure>
<h4 id="右连接">右连接</h4>
<blockquote>
<p>以右表为主表，右表数据全部显示，右表有而左表没有的显示为<code>null</code></p>
</blockquote>
<p><strong>图示：</strong></p>
<figure data-type="image" tabindex="5"><img src="https://pic.downk.cc/item/5e4c0b0e48b86553ee68dc5c.jpg" alt="" loading="lazy"></figure>
<p><strong>语法：</strong><code>select * from 表1 right join 表2 on 表1.列=表2.列</code></p>
<p><strong>准备新数据</strong></p>
<p>在课程表中插入两门新课程</p>
<pre><code class="language-mysql">insert into courses values(7,'就业课'), (8, '安全性测试')
</code></pre>
<figure data-type="image" tabindex="6"><img src="https://pic.downk.cc/item/5e4ce40848b86553ee8f48d9.jpg" alt="" loading="lazy"></figure>
<p>**例1：**查询所有课程的成绩，包括没有成绩的课程</p>
<pre><code class="language-mysql">select * from scores as sco
right join courses as cou
on sco.coursesNo=cou.coursesNo
</code></pre>
<p>**例2：**查询所有课程的成绩，包括没有成绩的课程，包括学生信息</p>
<pre><code class="language-mysql">select * from scores as sco
right join courses as cou 
on sco.coursesNo=cou.coursesNo
left join students as stu
on sco.studentNo=stu.studentNo
</code></pre>
<figure data-type="image" tabindex="7"><img src="https://pic.downk.cc/item/5e4cea7d48b86553ee90fdcb.jpg" alt="" loading="lazy"></figure>
<h3 id="311-自关联">3.11 自关联</h3>
<p>在设计数据表时，一些具有层次结构的数据，往往可能需要多张表实现，如下图：</p>
<figure data-type="image" tabindex="8"><img src="https://pic.downk.cc/item/5e4cefac48b86553ee9221f4.jpg" alt="" loading="lazy"></figure>
<p>虽然这样可以实现，但是很难维护，因为当有多个层级时，就需要多张表才能实现。</p>
<p>其实，这样的数据可以用一张表来实现，设计结构如下</p>
<figure data-type="image" tabindex="9"><img src="https://pic.downk.cc/item/5e4cff7d48b86553ee9598e0.jpg" alt="" loading="lazy"></figure>
<p><strong>准备数据：</strong></p>
<pre><code class="language-mysql">create table areas (
		id int unsigned primary key auto_increment,
		name varchar(10),
		pid int(5)
);

insert into areas values
(1, '湖南省', null),
(2, '长沙市', 1),
(3, '益阳市', 1),
(4, '湖北省', null),
(5, '武汉市', 4),
(6, '荆州市', 4)
</code></pre>
<p>**例1：**查询一共有多少个省份</p>
<pre><code class="language-mysql">select * from areas
where pid is null
</code></pre>
<p>**例2：**查询湖南省所有的市</p>
<pre><code class="language-mysql">select * from areas as sheng, areas as shi
where sheng.id=shi.pid and sheng.name='湖南省'
</code></pre>
<blockquote>
<p>注意：从<code>areas</code>这张表中查询了两次，只有当两张表中的<code>id</code>与<code>pid</code>相等时，则表示结果为需要的市区信息，再追加一个过滤省份信息即可</p>
</blockquote>
<figure data-type="image" tabindex="10"><img src="https://pic.downk.cc/item/5e4cf49c48b86553ee93413c.jpg" alt="" loading="lazy"></figure>
<p>还可以使用 <strong>内连接</strong> 的写法：</p>
<pre><code class="language-mysql">select * from areas as sheng
inner join areas as shi
on sheng.id=shi.pid
where sheng.name='湖南省'
</code></pre>
<p><strong>增加难度</strong></p>
<p>再<code>areas</code>表中再增加一个 <strong>区</strong> 层级</p>
<pre><code class="language-mysql">insert into areas values
(7, '开福区', 2),
(8, '岳麓区', 2)
(9, '洪山区', 5)
</code></pre>
<p>图示如下：</p>
<figure data-type="image" tabindex="11"><img src="https://pic.downk.cc/item/5e4cfb4e48b86553ee94b236.jpg" alt="" loading="lazy"></figure>
<p>**例：**查询湖南省所有的区</p>
<pre><code class="language-mysql">select * from areas as shi
inner join areas as qu on shi.id=qu.pid
inner join areas as sheng on shi.pid=sheng.id
where sheng.name='湖南省'
</code></pre>
<figure data-type="image" tabindex="12"><img src="https://pic.downk.cc/item/5e4cfd9e48b86553ee952f1c.jpg" alt="" loading="lazy"></figure>
<h3 id="312-子查询">3.12 子查询</h3>
<blockquote>
<p>在一个<code>select</code>语句中，嵌入另外一个<code>select</code>语句，这就是 <strong>子查询</strong></p>
</blockquote>
<p>**主查询：**主要查询的对象，一般是第一个<code>select</code></p>
<p><strong>主查询与子查询的关系：</strong></p>
<ul>
<li>子查询是嵌入到主查询中的</li>
<li>子查询辅助主查询，要么充当条件，要么充当数据源</li>
<li>子查询是可以独立存在的语句，是一条完整的<code>select</code>语句</li>
</ul>
<p><strong>子查询的分类：</strong></p>
<ul>
<li>标量子查询：子查询返回的结果是一个数据</li>
<li>列子查询：子查询返回的结果是一列</li>
<li>行子查询：子查询返回的结果是一行</li>
<li>表级子查询：返回的结果是多行多列</li>
</ul>
<p><strong>标量子查询：</strong><br>
**例1：**查询大于平均年龄的学生</p>
<pre><code class="language-mysql">-- 查询平均年龄
select avg(age) from students
-- 查询大于平均年龄的学生
select * from students where age&gt;21.5833
-- 上面用两条sql可以查出答案，但是如果在执行完第一条sql后数据发生了变化，那么最终查询结果会错误
-- 讲两条sql合在一起，就是子查询
select * from students where age&gt;(select avg(age) from students)
</code></pre>
<p>**例2：**查询王昭君的成绩</p>
<pre><code class="language-mysql">-- 先把王昭君的学号查出来
select studentNo from students where name='王昭君';
-- 再拿着查出的学号区成绩表中查询成绩
select score from scores where studentNo=001
-- 组合成子查询
select score from scores where studentNo=(select studentNo from students where name='王昭君')
</code></pre>
<p><strong>列子查询</strong><br>
**例1：**查询18岁学生的成绩，要求显示成绩</p>
<pre><code class="language-mysql">-- 先从学生表中查出18岁学生的学号
select studentNo from students where age=18
-- 再拿着拿出的学号去成绩表中查询成绩，注意有多个学号要查
select score from scores where studentNo in (002, 006)
-- 组合成列子查询
select score from scores where studentNo in (select studentNo from students where age=18)
</code></pre>
<p><strong>行子查询</strong></p>
<p>**例1：**查询年龄最大的男生的信息</p>
<pre><code class="language-mysql">-- 查询男生中年龄最大的学生信息
select * from students where sex='男' order by age desc limit 1
-- select age from students order by age desc limit 1
select * from students where (sex,age) = (select sex,age from students where sex='男' order by age desc limit 1)
</code></pre>
<blockquote>
<p>上面的解法只是为了演示行子查询，并不是最优解法</p>
</blockquote>
<p><strong>表子查询：</strong></p>
<p>**例：**查询数据库和自动化测试课程的成绩</p>
<pre><code class="language-mysql">-- 先查出数据库与自动化课程的编号
select * from courses where name in ('数据库', '自动化测试')
-- 再拿着查出的编号去成绩表查询成绩
select * from scores where studentNo in (1,2)
-- 组合成表子查询
select * from scores as sc
inner join (select * from courses where name in ('数据库', '自动化测试')) as c
on sc.coursesNo=c.coursesNo
</code></pre>
<p><strong>子查询拓展</strong></p>
<p>**例1：**查询18到20岁的学生信息</p>
<pre><code class="language-mysql">select * from students where age in (select age from students where age between 18 and 20)
</code></pre>
<p><strong>例2：</strong> 查询小于18岁的学生信息</p>
<pre><code class="language-mysql">select * from students where age in (select age from students where age&lt;18)
</code></pre>
<h3 id="313-查询演练">3.13 查询演练</h3>
<p><strong>准备数据</strong></p>
<pre><code class="language-mysql">create table goods(
    id int unsigned primary key auto_increment,  -- 编号，主键，无符号，自动增长
    name varchar(150),
    cate varchar(40),
    brand_name varchar(40),
    price decimal(10,3) default 0,  -- 小数，总共10位，小数占3位，正数占7位
    is_show bit default 1,		-- 位变量，一般用来储存状态，值位0/1，类似true/false
    is_saleoff bit default 0
);
insert into goods values(0,'r510vc 15.6英寸笔记本','笔记本','华硕','3399',default,default); 
insert into goods values(0,'y400n 14.0英寸笔记本电脑','笔记本','联想','4999',default,default);
insert into goods values(0,'g150th 15.6英寸游戏本','游戏本','雷神','8499',default,default); 
insert into goods values(0,'x550cc 15.6英寸笔记本','笔记本','华硕','2799',default,default); 
insert into goods values(0,'x240 超极本','超级本','联想','4999',default,default); 
insert into goods values(0,'u330p 13.3英寸超极本','超级本','联想','4299',default,default); 
insert into goods values(0,'svp13226scb 触控超极本','超级本','索尼','7999',default,default); 
insert into goods values(0,'ipad mini 7.9英寸平板电脑','平板电脑','苹果','1998',default,default);
insert into goods values(0,'ipad air 9.7英寸平板电脑','平板电脑','苹果','3388',default,default); 
insert into goods values(0,'ipad mini 配备 retina 显示屏','平板电脑','苹果','2788',default,default); 
insert into goods values(0,'ideacentre c340 20英寸一体电脑 ','台式机','联想','3499',default,default); 
insert into goods values(0,'vostro 3800-r1206 台式电脑','台式机','戴尔','2899',default,default); 
insert into goods values(0,'imac me086ch/a 21.5英寸一体电脑','台式机','苹果','9188',default,default); 
insert into goods values(0,'at7-7414lp 台式电脑 linux ）','台式机','宏碁','3699',default,default); 
insert into goods values(0,'z220sff f4f06pa工作站','服务器/工作站','惠普','4288',default,default); 
insert into goods values(0,'poweredge ii服务器','服务器/工作站','戴尔','5388',default,default); 
insert into goods values(0,'mac pro专业级台式电脑','服务器/工作站','苹果','28888',default,default); 
insert into goods values(0,'hmz-t3w 头戴显示设备','笔记本配件','索尼','6999',default,default); 
insert into goods values(0,'商务双肩背包','笔记本配件','索尼','99',default,default); 
insert into goods values(0,'x3250 m4机架式服务器','服务器/工作站','ibm','6888',default,default); 
insert into goods values(0,'hmz-t3w 头戴显示设备','笔记本配件','索尼','6999',default,default); 
insert into goods values(0,'商务双肩背包','笔记本配件','索尼','99',default,default);
</code></pre>
<p>图示</p>
<figure data-type="image" tabindex="13"><img src="https://pic.downk.cc/item/5e4d330a48b86553eea795f3.jpg" alt="" loading="lazy"></figure>
<p><strong>1.查询电脑的平均价格，并保留两位小数</strong></p>
<pre><code class="language-mysql">select round(avg(price), 2) from goods
</code></pre>
<blockquote>
<p>新用到<code>round</code>函数，语法为<code>round(小数，精度)</code></p>
</blockquote>
<p><strong>2.查询所有大于平均价格的商品信息，并按降序排序</strong></p>
<pre><code class="language-mysql">select * from goods where price&gt;(select avg(price) from goods) order by price desc
</code></pre>
<blockquote>
<p>用到子查询与排序</p>
</blockquote>
<p><strong>3.查询类型为'超极本'的商品价格</strong></p>
<pre><code class="language-mysql">select price from goods where cate='超级本'
</code></pre>
<p><strong>4.查询价格大于或等于'超级本'的商品信息，并按价格降序排序</strong></p>
<pre><code class="language-mysql">select * from goods 
where price &gt;=any (select price from goods where cate='超级本') order by price desc
</code></pre>
<blockquote>
<p>用到了<code>any</code>,当子查询返回一列多个数据时，匹配其中的某个或多个</p>
</blockquote>
<h3 id="314数据分表">3.14数据分表</h3>
<p><strong>创建商品类型表</strong></p>
<pre><code class="language-mysql">create table goods_cate(
		id int unsigned primary key auto_increment,
		cate_name varchar(10)
)
</code></pre>
<p><strong>查询商品表中的所有类别</strong></p>
<pre><code class="language-mysql">-- select cate from goods group by cate
select distinct cate from goods
</code></pre>
<p><strong>将查询到的类别数据直接插入到类型表</strong></p>
<pre><code class="language-mysql">insert into goods_cate(cate_name) select distinct(cate) from goods
</code></pre>
<p><strong>创建商品品牌表同时将商品表中查询到的所有品牌类型插入进去</strong></p>
<pre><code class="language-mysql">create table goods_brand (
	brand_id int unsigned primary key auto_increment,
	brand_name varchar(10)
) select distinct(brand_name) from goods
</code></pre>
<blockquote>
<p>注意：创建与插入时的字段名字要 <strong>一致</strong>，否则就会自动创建查询时的字段名并插入</p>
</blockquote>
<p><strong>通过商品类型表来更新商品表</strong></p>
<pre><code class="language-mysql">update goods as g
inner join goods_cate as gc on g.cate=gc.cate_name
set g.cate=gc.id
</code></pre>
<p><strong>通过商品品牌表来更新商品表</strong></p>
<pre><code class="language-mysql">update goods as g
inner join goods_brand as gb on g.brand_name=gb.brand_name
set g.brand_name=gb.brand_id
</code></pre>
<p><strong>修改商品表的字段名</strong></p>
<figure data-type="image" tabindex="14"><img src="https://pic.downk.cc/item/5e4d429748b86553eeacd5e7.jpg" alt="" loading="lazy"></figure>
<p><strong>连接查询</strong></p>
<p>连接三张表来进行查询</p>
<p>改造后，商品表的字段数据占用会缩小（节省硬盘空间），便于日后数据的维护，编辑类别与品牌会快捷很多</p>
<pre><code class="language-mysql">select * from goods as g
inner join goods_cate as gc on g.cate_id=gc.id
inner join goods_brand as gb on g.brand_id=gb.brand_id
</code></pre>

        </div>

        


        <div class="flex justify-between py-8">
          

          
            <div class="next-post">
              <a href="https://yihangliak.github.io/post/c7olK_1tf/">
                <h3 class="post-title">
                  MySQL系列入门（三）：Navicat的使用
                  <i class="remixicon-arrow-right-line"></i>
                </h3>
              </a>
            </div>
          
        </div>

        

      </div>
    </div>

    <script src="https://yihangliak.github.io/media/prism.js"></script>  
<script>

Prism.highlightAll()

let mainNavLinks = document.querySelectorAll(".markdownIt-TOC a");

// This should probably be throttled.
// Especially because it triggers during smooth scrolling.
// https://lodash.com/docs/4.17.10#throttle
// You could do like...
// window.addEventListener("scroll", () => {
//    _.throttle(doThatStuff, 100);
// });
// Only not doing it here to keep this Pen dependency-free.

window.addEventListener("scroll", event => {
  let fromTop = window.scrollY;

  mainNavLinks.forEach((link, index) => {
    let section = document.getElementById(decodeURI(link.hash).substring(1));
    let nextSection = null
    if (mainNavLinks[index + 1]) {
      nextSection = document.getElementById(decodeURI(mainNavLinks[index + 1].hash).substring(1));
    }
    if (section.offsetTop <= fromTop) {
      if (nextSection) {
        if (nextSection.offsetTop > fromTop) {
          link.classList.add("current");
        } else {
          link.classList.remove("current");    
        }
      } else {
        link.classList.add("current");
      }
    } else {
      link.classList.remove("current");
    }
  });
});


document.addEventListener("DOMContentLoaded", function() {
  var lazyImages = [].slice.call(document.querySelectorAll(".post-feature-image.lazy"));

  if ("IntersectionObserver" in window) {
    let lazyImageObserver = new IntersectionObserver(function(entries, observer) {
      entries.forEach(function(entry) {
        if (entry.isIntersecting) {
          let lazyImage = entry.target
          lazyImage.style.backgroundImage = `url(${lazyImage.dataset.bg})`
          lazyImage.classList.remove("lazy")
          lazyImageObserver.unobserve(lazyImage)
        }
      });
    });

    lazyImages.forEach(function(lazyImage) {
      lazyImageObserver.observe(lazyImage)
    })
  } else {
    // Possibly fall back to a more compatible method here
  }
});

const menuContainer = document.querySelector('.menu-container')
const menus = document.querySelectorAll('.menu-container .menu')
const mask = document.querySelector('.mask')
const contentWrapper = document.querySelector('.content-wrapper')
const latestArticle = document.querySelector('.latest-article')
const readMore = document.querySelector('.read-more')
const indexPage = document.querySelector('.index-page')

const isHome = location.pathname === '/'
if (latestArticle) {
  latestArticle.style.display = isHome ? 'block' : 'none'
  readMore.style.display = isHome ? 'block' : 'none'
  indexPage.style.display = isHome ? 'none' : 'block'
}

const openMenu = () => {
  menuContainer.classList.add('open')
  menus.forEach(menu => {
    menu.classList.add('animated', 'fadeInLeft')
  })
  mask.classList.add('open')
  contentWrapper.classList.add('is-second')
}

const closeMenu = () => {
  menuContainer.classList.remove('open')
  menus.forEach(menu => {
    menu.classList.remove('animated', 'fadeInLeft')
  })
  mask.classList.remove('open')
  contentWrapper.classList.remove('is-second')
}
</script>
  
  </body>
</html>
