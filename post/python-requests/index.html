<!DOCTYPE html>
<html>
  <head>
      
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>Alex&#39;s Blog</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

<meta name="description" content="ä½ å¥½  é“ä»”   :D"/>
<meta name="keywords" content="ä½ å¥½  é“ä»”   :D"/>

<!-- Place favicon.ico and apple-touch-icon.png in the root directory -->
<link rel="shortcut icon" href="https://yihangliak.github.io/favicon.ico">

<link rel="stylesheet" href="https://yihangliak.github.io/styles/main.css">

<!-- Modernizr JS -->
<script src="https://yihangliak.github.io/media/scripts/_vendors/modernizr-2.6.2.min.js"></script>
<!-- FOR IE9 below -->
<!--[if lt IE 9]>
<scripts src="https://yihangliak.github.io/media/scripts/_vendors/respond.min.js"></scripts>
<![endif]-->

<!-- Comment -->


<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/styles/tomorrow-night.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/highlight.min.js"></script>
<link crossorigin="anonymous" integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" href="https://lib.baomitu.com/font-awesome/5.8.1/css/all.min.css" rel="stylesheet">

  </head>
  <body>
  
<div id="fh5co-offcanvas">
    <a href="#!" class="fh5co-close-offcanvas js-fh5co-close-offcanvas">
        <span><i class="icon-cross3"></i> <span>Close</span></span>
    </a>
    <div class="fh5co-bio">
        <figure>
            <img src="https://yihangliak.github.io/media/images/avatar.png" alt="Alex&#39;s Blog" class="img-responsive">
        </figure>
        <h3 class="heading">ABOUT ME</h3>
        <h2>Alex&#39;s Blog</h2>
        <p>ä½ å¥½  é“ä»”   :D</p>
        <ul class="fh5co-social">
            
                <li>
                    
                </li>
            
                <li>
                    
                </li>
            
                <li>
                    
                </li>
            
                <li>
                    
                </li>
            
                <li>
                    
                </li>
            
        </ul>
    </div>

    <div class="fh5co-menu">
        <div class="fh5co-box">
            <h3 class="heading">æœç´¢</h3>
            <form action="#">
                <div class="form-group">
                    <input type="text" class="form-control" placeholder="è¾“å…¥å…³é”®å­—">
                </div>
            </form>
        </div>
        <div class="fh5co-box">
            <h3 class="heading">æ ‡ç­¾</h3>
            <ul>
                
                    <li><a href="https://yihangliak.github.io/tag/zMtSYVLzL">æ€§èƒ½</a></li>
                
                    <li><a href="https://yihangliak.github.io/tag/YrWwR_CC9">Requests</a></li>
                
                    <li><a href="https://yihangliak.github.io/tag/WAOgluHv7">postman</a></li>
                
                    <li><a href="https://yihangliak.github.io/tag/LHtTqfylH">æ•°æ®åº“</a></li>
                
                    <li><a href="https://yihangliak.github.io/tag/ZqPdD_sAA">flask</a></li>
                
                    <li><a href="https://yihangliak.github.io/tag/RIfr7ujrR">Selenium</a></li>
                
                    <li><a href="https://yihangliak.github.io/tag/kFYrwlZ3T">Python</a></li>
                
                    <li><a href="https://yihangliak.github.io/tag/1bMilhU6w">SVN</a></li>
                
            </ul>
        </div>
    </div>
</div>

<header id="fh5co-header">
    <div class="container-fluid">
        <div class="row">
            <a href="#" class="js-fh5co-nav-toggle fh5co-nav-toggle"><i></i></a>
            <ul class="fh5co-social">
                
                    <li>
                        <a href="https://yihangliak.github.io"
                         >
                            é¦–é¡µ
                        </a>
                    </li>
                
                    <li>
                        <a href="https://yihangliak.github.io/archives"
                         >
                            å½’æ¡£
                        </a>
                    </li>
                
                    <li>
                        <a href="https://yihangliak.github.io/tags"
                         >
                            æ ‡ç­¾
                        </a>
                    </li>
                
                    <li>
                        <a href="https://yihangliak.github.io/post/about/"
                         >
                            å…³äº
                        </a>
                    </li>
                
            </ul>
            <div class="col-lg-12 col-md-12 text-center">
                <h1 id="fh5co-logo">
                    <a href="https://yihangliak.github.io">Alex&#39;s Blog</a>
                </h1>
            </div>
        </div>
    </div>
</header>


<!--  <a href="#" class="fh5co-post-prev"><span>ğŸ‘ˆ Prev</span></a>-->
<!--  <a href="#" class="fh5co-post-next"><span>Next ğŸ‘‰</span></a>-->

  <div class="container-fluid">
      <div class="row fh5co-post-entry single-entry">
          <article class="col-lg-8 col-lg-offset-2 col-md-8 col-md-offset-2 col-sm-8 col-sm-offset-2 col-xs-12 col-xs-offset-0">
              <figure class="animate-box">
                  
                      <img src="https://yihangliak.github.io/post-images/python-requests.jpg" alt="Python Requests" class="img-responsive">
                  
              </figure>
              <span class="fh5co-meta animate-box">
                  
                      <div class="tag-container">
                          
                              <a href="https://yihangliak.github.io/tag/YrWwR_CC9" class="tag">Requests, </a>
                          
                      </div>
                  
              </span>
              <h2 class="fh5co-article-title animate-box">Python Requests</h2>
              <span class="fh5co-meta fh5co-date animate-box">2019-07-20</span>

              <div class="col-lg-12 col-lg-offset-0 col-md-12 col-md-offset-0 col-sm-12 col-sm-offset-0 col-xs-12 col-xs-offset-0 text-left content-article">
                  <div class="row">
                      <div class="col-md-12 animate-box post-content">
                          <p> <h1 id="requests">Requests</h1>
<h1 id="1-å®‰è£…requests">1. å®‰è£…requests</h1>
<p>å‘½ä»¤è¡Œä½¿ç”¨pipå®‰è£…ï¼š<code>pip install requests</code></p>
<h1 id="2-getè¯·æ±‚">2. getè¯·æ±‚</h1>
<h2 id="21-getè¯·æ±‚">2.1 getè¯·æ±‚</h2>
<p>è¯¥æ–¹æ³•ç”¨äºå‘ç›®æ ‡ç½‘å€å‘é€è¯·æ±‚ï¼Œæ¥æ”¶å“åº”</p>
<p><code>get</code>æ–¹æ³•ä¸­çš„å‚æ•°è¯´æ˜ï¼š</p>
<ul>
<li>urlï¼šå¿…å¡«ï¼ŒæŒ‡å®šè¯·æ±‚çš„ç›®æ ‡ç½‘å€</li>
<li>paramsï¼šå­—å…¸ç±»å‹ï¼ŒæŒ‡å®šè¯·æ±‚å‚æ•°</li>
</ul>
<p>è¯¥æ–¹æ³•è¿”å›ä¸€ä¸ªresponseå¯¹è±¡ï¼Œå¸¸ç”¨çš„æ–¹æ³•å’Œå±æ€§å¦‚ä¸‹ï¼š</p>
<pre><code class="language-python">import requests

r = requests.get('https://api.github.com/events')  # ä½¿ç”¨getè¯·æ±‚è®¿é—®github
print(r.status_code)                      # æ‰“å°å“åº”çŠ¶æ€ç 
print(r.text)                             # è¿”å›strç±»å‹çš„å“åº”
print(r.url)                              # è¿”å›è¯·æ±‚ç½‘ç«™çš„url
print(r.encoding)                         # è¿”å›å“åº”æ—¶é—´çš„ç¼–ç æ–¹å¼
print(r.cookies)                          # è¿”å›å“åº”çš„cookiesä¿¡æ¯
print(r.headers)                          # è¿”å›å“åº”å¤´éƒ¨
print(r.content)                          # è¿”å›bytesç±»å‹çš„å“åº”ä½“
print(r.json())                           # è¿”å›å­—å…¸ç±»å‹çš„å“åº”ä½“
</code></pre>
<h2 id="22-ä¼ é€’urlå‚æ•°">2.2 ä¼ é€’URLå‚æ•°</h2>
<blockquote>
<p>æ³¨æ„ï¼š<code>httpbin.org</code>æ˜¯ä¸€ä¸ªå¼€æºçš„ï¼Œç”¨äºæµ‹è¯•ç½‘é¡µè¯·æ±‚çš„ç½‘ç«™</p>
</blockquote>
<p>åœ¨getè¯·æ±‚ä¸­ï¼Œä½¿ç”¨<code>params</code>å…³é”®å­—å‚æ•°ï¼Œå¯å°†å­—å…¸ç±»å‹çš„è‡ªå®šä¹‰å‚æ•°ä¼ å…¥åˆ°URLä¸­è¿›è¡Œæ‹¼æ¥</p>
<pre><code class="language-python">import requests

url = 'http://httpbin.org/get'   # å®šä¹‰è¯·æ±‚ç›®æ ‡ç½‘å€
params = {                       # å®šä¹‰è‡ªå®šä¹‰è¯·æ±‚å‚æ•°
    'key1':'value1',
    'key2':'value2'
}
r = requests.get(url, params=params)  # getè¯·æ±‚ä¸­ä¼ å…¥è‡ªå®šä¹‰å‚æ•°
print(r.status_code)               # æ‰“å°çŠ¶æ€ç 
print(r.url)                       # æ‰“å°ä¼ å…¥å‚æ•°åçš„URL
print(r.json())                    # è¿”å›dictå“åº”
</code></pre>
<pre><code># çŠ¶æ€ç 
200
# ä¼ å…¥å‚æ•°åçš„url
http://httpbin.org/get?key1=value1&amp;key2=value2    
# è¿”å›çš„dictç±»å‹æ•°æ®ä¸­å¯ä»¥çœ‹åˆ°è‡ªå®šä¹‰å‚æ•°
{'args': {'key1': 'value1', 'key2': 'value2'}, 'headers': {'Accept': '*/*', 'Accept-Encodinh': 'gzip, deflate', 'Connectioo': 'keep-alive', 'Host': 'httpbin.org', 'User-Agent': 'python-requests/2.18.4'}, 'origin': '119.123.77.203, 119.123.77.203', 'url': 'https://httpbin.org/get?key1=value1&amp;key2=value2'}

</code></pre>
<h2 id="23-å®ä¾‹">2.3 å®ä¾‹</h2>
<p>ä»¥ç™¾åº¦æœç´¢ä¸ºä¾‹</p>
<pre><code class="language-python">import requests

url = 'http://www.baidu.com/s'
params = {'wd':'python'}
r = requests.get(url, params=params)  # getæ–¹æ³•ä¸­ä¼ å…¥paramså‚æ•°ï¼Œå¯ä»¥è®²è‡ªå®šä¹‰å‚æ•°æ‹¼æ¥åˆ°URLä¸­
print(r.url)                          # æ‰“å°æ‹¼æ¥è¿‡åçš„URL
print(r.text)                         # æ‰“å°å“åº”æ–‡æœ¬å†…å®¹
</code></pre>
<pre><code>http://www.baidu.com/s?wd=python
</code></pre>
<h1 id="3-postè¯·æ±‚">3. postè¯·æ±‚</h1>
<h2 id="31-data">3.1 data</h2>
<p><code>data</code>å‚æ•°æ˜¯å­—å…¸ç±»å‹ï¼Œä¼ å…¥<code>form</code>é‡Œ</p>
<pre><code class="language-python">import requests

r = requests.post('http://httpbin.org/post', data={'key1':'value1', 'key2':'value2'})
print(r.text)
</code></pre>
<pre><code>{
  &quot;args&quot;: {}, 
  &quot;data&quot;: &quot;&quot;, 
  &quot;files&quot;: {}, 
  &quot;form&quot;: {               # dataä¼ å…¥åˆ°è¿™é‡Œ
    &quot;key1&quot;: &quot;value1&quot;, 
    &quot;key2&quot;: &quot;value2&quot;
  }, 
  &quot;headers&quot;: {
    &quot;Accept&quot;: &quot;*/*&quot;, 
    &quot;Accept-Encoding&quot;: &quot;gzip, deflate&quot;, 
    &quot;Content-Length&quot;: &quot;23&quot;, 
    &quot;Content-Type&quot;: &quot;application/x-www-form-urlencoded&quot;, 
    &quot;Host&quot;: &quot;httpbin.org&quot;, 
    &quot;User-Agent&quot;: &quot;python-requests/2.18.4&quot;
  }, 
  &quot;json&quot;: null, 
  &quot;origin&quot;: &quot;119.123.77.203, 119.123.77.203&quot;, 
  &quot;url&quot;: &quot;https://httpbin.org/post&quot;
}
</code></pre>
<h2 id="32-json">3.2 json</h2>
<pre><code class="language-python">import requests

data = {'key1':'value1', 'key2':'value2'}
r = requests.post('http://httpbin.org/post', json=json.dumps(data))
print(r.text)
</code></pre>
<pre><code>{
  &quot;args&quot;: {}, 
  &quot;data&quot;: &quot;\&quot;{\\\&quot;key1\\\&quot;: \\\&quot;value1\\\&quot;, \\\&quot;key2\\\&quot;: \\\&quot;value2\\\&quot;}\&quot;&quot;,   # jsonä¼ åˆ°è¿™é‡Œ
  &quot;files&quot;: {}, 
  &quot;form&quot;: {}, 
  &quot;headers&quot;: {
    &quot;Accept&quot;: &quot;*/*&quot;, 
    &quot;Accept-Encoding&quot;: &quot;gzip, deflate&quot;, 
    &quot;Content-Length&quot;: &quot;46&quot;, 
    &quot;Content-Type&quot;: &quot;application/json&quot;, 
    &quot;Host&quot;: &quot;httpbin.org&quot;, 
    &quot;User-Agent&quot;: &quot;python-requests/2.18.4&quot;
  }, 
  &quot;json&quot;: &quot;{\&quot;key1\&quot;: \&quot;value1\&quot;, \&quot;key2\&quot;: \&quot;value2\&quot;}&quot;, 
  &quot;origin&quot;: &quot;119.123.77.203, 119.123.77.203&quot;, 
  &quot;url&quot;: &quot;https://httpbin.org/post&quot;
}

</code></pre>
<h2 id="33-å®ä¾‹">3.3 å®ä¾‹</h2>
<p>ecshopç™»å½•å®ä¾‹ï¼š</p>
<p>é¦–å…ˆï¼Œé€šè¿‡<code>fiddler</code>æŠ“åŒ…ï¼ŒæŸ¥çœ‹ecshopç™»å½•è¯·æ±‚å¤´ä¸­çš„<code>Content-Type</code>ï¼Œå¯ä»¥çœ‹åˆ°è¯·æ±‚ä¸­çš„æ•°æ®æ˜¯ä»¥<code>è¡¨å•</code>çš„å½¢å¼å‘é€åˆ°æœåŠ¡å™¨çš„ï¼Œå¦‚å›¾ï¼š</p>
<p><img src="https://i.loli.net/2019/07/22/5d352bcc4179d47999.png" alt=""></p>
<p>æ‰€ä»¥ï¼Œåœ¨ä½¿ç”¨<code>requests</code>å‘é€<code>post</code>è¯·æ±‚æ—¶ï¼Œç”¨æˆ·åä¸å¯†ç éƒ½ä¼šä»¥<code>data</code>å…³é”®å­—å‚æ•°ä¼ å…¥</p>
<pre><code class="language-python">import requests
import re

url = 'http://localhost:82/ecshop/user.php'
datas = {'username':'liyihang', 'password':'tashi123', 'act':'act_login'}
r = requests.post(url, data=datas)
print(r.text)

# å¯ä»¥ç”¨reæ¨¡å—ï¼Œæ­£åˆ™åŒ¹é…çš„æ–¹å¼ï¼Œæå–å‡ºç”¨æˆ·å
t = re.findall('&lt;font class=&quot;f4_b&quot;&gt;(.+?)&lt;/font&gt;', r.text)
print(t)
</code></pre>
<pre><code>['liyihang']
</code></pre>
<h1 id="4-ä¿æŒä¼šè¯">4. ä¿æŒä¼šè¯</h1>
<p>ä¸€èˆ¬åœ¨é¡¹ç›®ä¸­ï¼Œå¾ˆå¤šæ“ä½œéƒ½æ˜¯éœ€è¦å…ˆç™»å½•å†è¿›è¡Œï¼Œæ‰€ä»¥éœ€è¦å…ˆå‘é€ç™»å½•è¯·æ±‚ï¼Œç™»å½•æˆåŠŸåï¼Œä¿æŒç™»å½•çŠ¶æ€ï¼Œå†è¿›è¡Œåç»­æ“ä½œï¼Œåœ¨requestsä¸­ä¿æŒä¼šè¯çš„æ–¹å¼å¦‚ä¸‹ï¼š</p>
<pre><code class="language-python">import requests

# ä¿æŒç™»å½•ï¼Œç„¶åå……å€¼100
s = requests.session()  # å»ºç«‹ä¸€ä¸ªsession

# å®šä¹‰ç™»å½•ä¸å……å€¼éœ€è¦çš„æ•°æ®
url = 'http://localhost:82/ecshop/user.php'
datas1 = {'username':'liyihang', 'password':'tashi123', 'act':'act_login'}
datas2 = {'amount':'100', 'user_note':'jiekou', 'payment_id':'2', 'act':'act_account'}

# ä½¿ç”¨å»ºç«‹çš„sessionå¯¹è±¡å‘é€ç™»å½•è¯·æ±‚
# ç™»å½•æˆåŠŸåä¼šè¿”å›çš„cookieä¼šè¢«ä¿å­˜åœ¨è¯¥sessionä¸­
r = s.post(url, data=datas1)
# print(r.cookies)
# å‘é€å……å€¼è¯·æ±‚
r2 = s.post(url, data=datas2 )
print(r2.text)
</code></pre>
<h1 id="5è¯·æ±‚å¤´">5.è¯·æ±‚å¤´</h1>
<h2 id="51-è·å–è¯·æ±‚å¤´">5.1 è·å–è¯·æ±‚å¤´</h2>
<blockquote>
<p><code>httpbin.org/headers</code>ä¼šè¿”å›å‘é€è¯·æ±‚çš„è¯·æ±‚å¤´</p>
</blockquote>
<p>è¯·æ±‚å¤´å†…å®¹å¯ä»¥ç”¨<code>r.headers</code>è·å–</p>
<pre><code class="language-python">import requests

r = requests.get('http://httpbin.org/headers')
print(r.headers)
print(r.text)

</code></pre>
<p>ç»“æœå¦‚ä¸‹ï¼Œå¯ä»¥çœ‹åˆ°<code>user-agent</code>ä¸ºrequests</p>
<pre><code>{
  &quot;headers&quot;: {
    &quot;Accept&quot;: &quot;*/*&quot;, 
    &quot;Accept-Encodinh&quot;: &quot;gzip, deflate&quot;, 
    &quot;Connectioo&quot;: &quot;keep-alive&quot;, 
    &quot;Host&quot;: &quot;httpbin.org&quot;, 
    &quot;User-Agent&quot;: &quot;python-requests/2.18.4&quot;   
  }
}
</code></pre>
<h2 id="52-è‡ªå®šä¹‰è¯·æ±‚å¤´">5.2 è‡ªå®šä¹‰è¯·æ±‚å¤´</h2>
<p>å¾ˆå¤šç½‘ç«™ä¸ºäº†ä¿è¯å®‰å…¨ä¼šè®¾ç½®<code>åçˆ¬è™«æœºåˆ¶</code>ï¼Œä¹Ÿå°±æ˜¯è¯´å¯¹äº<code>éæµè§ˆå™¨</code>çš„è®¿é—®æ‹’ç»å“åº”ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå°±éœ€è¦ä¿®æ”¹è¯·æ±‚ä¸­çš„<code>headers</code>ä¿¡æ¯<code>ä¼ªè£…</code>æˆæµè§ˆå™¨è®¿é—®</p>
<p><strong>ä½¿ç”¨æµè§ˆå™¨è®¿é—®httpbin è·å–headers</strong></p>
<p>æ‰“å¼€æµè§ˆå™¨ï¼Œåœ¨åœ°å€æ ä¸­è¾“å…¥ï¼š<code>http://httpbin.org/headers</code></p>
<p>è¯¥URLä¼šè¿”å›å‘é€è¯·æ±‚çš„è¯·æ±‚å¤´ï¼Œæ‰€ä»¥ä¼šå°†æµè§ˆå™¨å‘é€çš„è¯·æ±‚å¤´éƒ¨è¿”å›ï¼Œå¦‚ä¸‹ï¼š</p>
<pre><code>{
  &quot;headers&quot;: {
    &quot;Accept&quot;: &quot;text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3&quot;, 
    &quot;Accept-Encodinh&quot;: &quot;gzip, deflate&quot;, 
    &quot;Accept-Language&quot;: &quot;zh-CN,zh;q=0.9,en;q=0.8&quot;, 
    &quot;Connectioo&quot;: &quot;keep-alive&quot;, 
    &quot;Host&quot;: &quot;httpbin.org&quot;, 
    &quot;Upgrade-Insecure-Requests&quot;: &quot;1&quot;, 
    &quot;User-Agent&quot;: &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/74.0.3729.169 Safari/537.36&quot;
  }
}
</code></pre>
<p><strong><code>headers</code>ä¸­å„å‚æ•°çš„ä½œç”¨å¦‚ä¸‹ï¼š</strong></p>
<ul>
<li>acceptï¼šæŒ‡å®šå®¢æˆ·å•æ¥å—çš„å†…å®¹ç±»å‹ï¼Œ<code>/</code>è¡¨ç¤ºä»»æ„ç±»å‹ï¼Œå…¶ä½™æŒ‰ç…§å­—ä¹‰</li>
<li>accept-encodingï¼šæŒ‡å®šå®¢æˆ·ç«¯æ¥å—çš„ç¼–ç ç±»å‹</li>
<li>accept-languageï¼šæŒ‡å®šå®¢æˆ·ç«¯æ¥å—çš„è¯­è¨€ç±»å‹ï¼Œ<code>q=0.9</code>è¡¨ç¤ºå–œæ¬¢ç¨‹åº¦ï¼Œä¸å†™åˆ™æ˜¯1ï¼Œæ•°å€¼è¶Šé«˜è¶Šå–œæ¬¢</li>
<li>connectionï¼šæŒ‡å®šé•¿é“¾æ¥å¤„ç†æ–¹å¼ï¼Œ<code>keep-alive</code>è¡¨ç¤ºå¸Œæœ›ä¿æŒä¼ è¾“é“¾æ¥ï¼Œhttpæœ¬èº«æ˜¯æ— çŠ¶æ€çš„</li>
<li>hostï¼šæœåŠ¡å™¨ä¸»æœºå</li>
<li>user-agentï¼šç”¨æˆ·ä»£ç†ï¼ŒæœåŠ¡å™¨ä»æ­¤å¤„çŸ¥é“å®¢æˆ·ç«¯çš„ç³»ç»Ÿç±»å‹ä»¥åŠç‰ˆæœ¬ç­‰ä¿¡æ¯</li>
</ul>
<p><strong>å°†è·å–åˆ°çš„headers ä¼ ç»™<code>get</code></strong></p>
<pre><code class="language-python">import requests

url = 'http://httpbin.org/headers'
header = {
    &quot;Accept&quot;: &quot;text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3&quot;,
    &quot;Accept-Encodinh&quot;: &quot;gzip, deflate&quot;,
    &quot;Accept-Language&quot;: &quot;zh-CN,zh;q=0.9,en;q=0.8&quot;,
    &quot;Connectioo&quot;: &quot;keep-alive&quot;,
    &quot;Host&quot;: &quot;httpbin.org&quot;,
    &quot;Upgrade-Insecure-Requests&quot;: &quot;1&quot;,
    &quot;User-Agent&quot;: &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/74.0.3729.169 Safari/537.36&quot;
  }
# url = 'http://www.baidu.com'
r = requests.get(url, headers=header)  # å°†è‡ªå®šä¹‰headersä¿¡æ¯é€šè¿‡headerså…³é”®å­—å‚æ•°ä¼ å…¥
# print(r.headers)
print(r.text)
</code></pre>
<p>è‡ªå®šä¹‰headersåï¼Œè¿”å›çš„ç»“æœå¦‚ä¸‹ï¼š</p>
<pre><code>{
  &quot;headers&quot;: {
    &quot;Accept&quot;: &quot;text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3&quot;, 
    &quot;Accept-Encodinh&quot;: &quot;gzip, deflate,gzip, deflate&quot;, 
    &quot;Accept-Language&quot;: &quot;zh-CN,zh;q=0.9,en;q=0.8&quot;, 
    &quot;Connectioo&quot;: &quot;keep-alive,keep-alive&quot;, 
    &quot;Host&quot;: &quot;httpbin.org&quot;, 
    &quot;Upgrade-Insecure-Requests&quot;: &quot;1&quot;, 
    &quot;User-Agent&quot;: &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/74.0.3729.169 Safari/537.36&quot;
  }
}

</code></pre>
<h1 id="6https">6.HTTPS</h1>
<p>requestsåœ¨å‘é€<code>HTTPS</code>è¯·æ±‚æ—¶ï¼Œä¼šæŠ¥è¯ä¹¦é”™è¯¯ï¼Œä»£ç ä¸é”™è¯¯å¦‚ä¸‹ï¼š</p>
<pre><code class="language-python">import requests

url = 'https://login.51job.com/login.php'
r = requests.post(url)
print(r.encoding)   # æŸ¥çœ‹å“åº”çš„ç¼–ç æ ¼å¼
r.encoding = 'gbk'  # æŒ‡å®šå“åº”çš„ç¼–ç æ ¼å¼ï¼Œä¸æŒ‡å®šå“åº”å†…å®¹ä¸­çš„ä¸­æ–‡ä¼šä¹±ç 
print(r.text)       # æŸ¥çœ‹å“åº”çš„æ–‡æœ¬ä¿¡æ¯
</code></pre>
<p>æ‰§è¡Œä¸Šè¿°ä»£ç ä¼šæŠ¥è¯ä¹¦é”™è¯¯ï¼š<code>requests.exceptions.SSLError: HTTPSConnectionPool</code></p>
<p>è§£å†³åŠæ³•ä¸ºï¼š</p>
<pre><code class="language-python">import requests
import urllib3
urllib3.disable_warnings()   # ä½¿ç”¨urllib3å…³é—­è­¦å‘Š

url = 'https://login.51job.com/login.php'
r = requests.post(url, verify=False)    # å…³é—­è¯ä¹¦éªŒè¯
print(r.encoding)
r.encoding = 'gbk'
print(r.text)
</code></pre>
 </p>
                      </div>
                  </div>

                  <div class="row">
                      <div class="col-md-12 animate-box">
                          
                              <div class="next-post">
                                  <div class="next">ä¸‹ä¸€ç¯‡</div>
                                  <a href="https://yihangliak.github.io/post/postman-shi-yong-ji-qiao">
                                      <h3 class="post-title">
                                          Postmanä½¿ç”¨æŠ€å·§
                                      </h3>
                                  </a>
                              </div>
                          
                      </div>
                  </div>

                  <div class="row">
                      <div class="col-md-12 animate-box">
                          
                      </div>
                  </div>
              </div>

          </article>
      </div>
  </div>

    
<footer id="fh5co-footer">
  <p>Powered by Alexxx</p>
</footer>


    
<!-- jQuery -->
<script src="https://yihangliak.github.io/media/scripts/_vendors/jquery.min.js"></script>
<!-- jQuery Easing -->
<script src="https://yihangliak.github.io/media/scripts/_vendors/jquery.easing.1.3.js"></script>
<!-- Bootstrap -->
<script src="https://yihangliak.github.io/media/scripts/_vendors/bootstrap.min.js"></script>
<!-- Waypoints -->
<script src="https://yihangliak.github.io/media/scripts/_vendors/jquery.waypoints.min.js"></script>
<!-- Main JS -->
<script src="https://yihangliak.github.io/media/scripts/_vendors/main.js"></script>
<!-- Md5 Min JS -->
<script src="https://yihangliak.github.io/media/scripts/_vendors/md5.min.js"></script>

<script type="application/javascript">
    hljs.initHighlightingOnLoad();
</script>




  </body>
</html>
